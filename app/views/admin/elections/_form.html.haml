= form_for [:admin, @election] do |f|
  -if @election.errors.any?
    #error_explanation
      %h2= "#{pluralize(@election.errors.count, "error")} prohibited this election from being saved:"
      %ul
        - @election.errors.full_messages.each do |msg|
          %li= msg

  .clearfix
    = f.label :name
    .input= f.text_field :name, class: 'xlarge'

  .clearfix
    = label :candidates_ids, "Candidates"
    .input
      %ul.inputs-list
        - for candidate in Candidate.all do
          %li
            %label
              = check_box_tag "election[candidate_ids][]", candidate.id, @election.candidate_ids.include?(candidate.id)
              %span= candidate.name

  = f.fields_for :themes do |theme_f|
    = render 'theme_fields', f: theme_f

  .clearfix.offset1= link_to_add_fields "Add a theme", f, :themes

  .actions
    = f.submit class: 'btn primary'
